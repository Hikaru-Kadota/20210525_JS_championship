<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign_Up</title>
  <!-- この下にAPI KEY -->

</head>

<body>

  <div class="background">
    <div class="input_container">
      <div>
        <p id="error_message_0" class="error_message"></p>
      </div>
      <div>
        <h3>あなたの名前を入力してください</h3>
        <input type="text" id='input_name' placeholder="ユーザー名(６文字以上)">
      </div>
    </div>

    <div class="btn">
      <div class="signUp_btn">
        <a id="sign_up">ここを押してfirebaseへ登録</a>
      </div>
    </div>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase.js"></script>


    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyB0cMp-Zr5iobXG5IVsg12YUAWvnPJ5ie8",
        authDomain: "test-c9e2e.firebaseapp.com",
        projectId: "test-c9e2e",
        storageBucket: "test-c9e2e.appspot.com",
        messagingSenderId: "915346520501",
        appId: "1:915346520501:web:f93968b673c4e72ffe41fc"
      };
      firebase.initializeApp(firebaseConfig);
      const user_info = firebase.firestore().collection('User');
    </script>


    <script>
      $('#sign_up').on('click', function () {
        const signUp_data = {
          name: $('#input_name').val()
        };
        if (signUp_data.name != "") {
          user_info.add(signUp_data);

          //この行で、URLと入力した名前を合体させてページ遷移
          const time_out = function () {
            window.location.href = 'game.html?' + signUp_data.name;
          };
          setTimeout(time_out, 1500);
        }


        $('#input_name').val('');
      });
    </script>

</body>

</html>